---
import AllergensCard from '@/components/AllergensCard/AllergensCard.astro';
import Container from '@/components/Global/Container.astro';
import FoodCategories from '@/components/Menu/FoodCategories/FoodCategories.astro';
import MenuList from '@/components/Menu/MenuList';
import MenuOfTheDay from '@/components/sections/MenuOfTheDay/MenuOfTheDay.astro';
import Layout from '@/layouts/Layout.astro';
import { getCategories } from '@/lib/getCategories';
import { getDishes } from '@/lib/getDishes';
import { useTranslations } from '@/lib/i18n/useTranslations';
import { Image } from 'astro:assets';
import ChickenBanner from '@/assets/images/chicken-banner.webp';

const lang = Astro.currentLocale as "es" | "en" | "de";
const t = useTranslations(lang);

const [categories, dishes] = await Promise.all([
  getCategories(lang),
  getDishes(lang),
]);

const categoriesToShow = [...categories].slice(7)
---

<Layout title={`${t("nav.menu")} - La cocina de Vero`}>
    <Container>
        <a href="tel:+34652640538">
          <Image src={ChickenBanner} alt="Banner de pollo asado del menÃº de La cocina de Vero" width={1120} height={300} class="object-cover object-center mt-5" />
        </a>
        <MenuOfTheDay/>
        <FoodCategories categories={categoriesToShow} />
        <MenuList client:only lang={lang} dishes={dishes} categories={categories}/>
        <AllergensCard/>
    </Container>
</Layout>