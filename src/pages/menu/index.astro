---
import AllergensCard from '@/components/AllergensCard/AllergensCard.astro';
import Container from '@/components/Global/Container.astro';
import Layout from '@/layouts/Layout.astro';
import { useTranslations } from '@/lib/i18n/useTranslations';
import { Image } from 'astro:assets';
import ChickenBanner from '@/assets/images/chicken-banner.webp';
import MenuPageOptimizer from '@/components/MenuPageOptimizer.astro';
import MenuLoader from '@/components/MenuLoader';

const lang = Astro.currentLocale as "es" | "en" | "de";
const t = useTranslations(lang);

// NO await here - p√°gina se renderiza inmediatamente
---

<Layout title={`${t("nav.menu")} - La cocina de Vero`}>
    <Container>
        <a href="tel:+34652640538">
          <Image src={ChickenBanner} alt="Chicken Banner" width={1120} height={300} class="object-cover object-center mt-5" />
        </a>
        
        <!-- Menu content loads asynchronously - page renders immediately -->
        <MenuLoader client:load lang={lang} />
        
        <div data-component="allergens-card" class="lazy-component">
          <AllergensCard/>
        </div>
    </Container>
    <MenuPageOptimizer />
</Layout>