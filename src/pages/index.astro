---
import Layout from "@/layouts/Layout.astro";
import Hero from "@/components/sections/Hero/Hero.astro";
import WhyChooseUs from "@/components/sections/WhyChooseUs/WhyChooseUs.astro";
import OurDishes from "@/components/sections/OurDishes/OurDishes.astro";
import HowItWorks from "@/components/sections/HowItWorks/HowItWorks.astro";
import Testimonials from "@/components/sections/Testimonials/Testimonials.astro";
import CallToAction from "@/components/sections/CallToAction/CallToAction.astro";
import Footer from "@/components/sections/Footer/Footer.astro";
import { Image } from "astro:assets";
import ChickenBanner from '@/assets/images/chicken-banner.webp';
import LogoImg from "@/assets/images/logo.webp";
import { getDishesByLang } from "@/lib/getDishesByLang";

const lang = Astro.currentLocale as "es" | "en" | "de";

const allDishes = await getDishesByLang({limit: 8, conditions: ["image"]});
const popularDishes = {
	es: allDishes.es.filter(dish => !(dish?.image || "").includes("placeholder")).slice(0, 6),
	en: allDishes.en.filter(dish => !(dish?.image || "").includes("placeholder")).slice(0, 6),
	de: allDishes.de.filter(dish => !(dish?.image || "").includes("placeholder")).slice(0, 6),
}

---

<Layout
	title={"La cocina de Vero"}
	ogTitle={"La cocina de Vero"}
	ogDescription={"P치gina principal de La cocina de Vero, comida casera para llevar en Torrox, M치laga."}
	ogUrl="https://lacocinadevero.es/"
	ogImage={LogoImg.src}
	twitterTitle={"La cocina de Vero"}
	twitterDescription={"P치gina principal de La cocina de Vero, comida casera para llevar en Torrox, M치laga."}
	twitterImage={LogoImg.src}
>
	<Hero />
	<WhyChooseUs />
	<OurDishes dishes={popularDishes[lang] ?? popularDishes.es} />
	<a href="tel:+34652640538" class="bg-[#282828] w-full block">
		<Image src={ChickenBanner} alt="Chicken Banner" width={1120} height={300} class="object-cover object-center mt-5" loading={"lazy"} />
	</a>
	<HowItWorks />
	<Testimonials />
	<CallToAction />
</Layout>
